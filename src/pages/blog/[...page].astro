---
import Layout from '../../layouts/Layout.astro';
import BlogCard from '../../components/BlogCard.astro';
import Pagination from '../../components/Pagination.astro';
import { getCollection } from 'astro:content';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async ({ paginate }) => {
  const blogPosts = (await getCollection('blog')).sort((a, b) =>
    new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  );

  return paginate(blogPosts, { pageSize: 9 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;

// Variabile SEO
const title = page.currentPage > 1 
  ? `Blog | Aurelian Epuraș - Pagina ${page.currentPage}` 
  : "Blog | Aurelian Epuraș";
const description = "Un spațiu dedicat trăirilor și parcursului meu artistic. Descoperă articole despre procesul creativ, amintiri din carieră și reflecții personale despre muzică, artă și momentele care mi-au definit drumul.";
const image = "/uploads/images/Aurelian-Epuras.jpg"; 
const imageAlt = "Blog | Aurelian Epuraș";
---

<Layout
  title={title}
  description={description}
  image={image}
  imageAlt={imageAlt}
>
 <section class="pt-20 pb-20 bg-ivory dark:bg-navy-deep">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12 max-w-3xl mx-auto">
      <h1 class="font-serif text-4xl md:text-5xl lg:text-6xl text-navy dark:text-ivory-light mb-6">Blog</h1>
      <div class="w-16 h-0.5 bg-gold-warm dark:bg-gold-bright mx-auto mb-6"></div>
      
      <p class="text-left md:text-center text-lg text-navy/70 dark:text-ivory-light/70 leading-relaxed">
        Dincolo de muzică, aici scriu despre tot ce îmi atrage atenția și mă pune în mișcare: concerte, poezii, locuri, oameni, întâlniri, idei, stări sau lucruri mărunte care, pentru o clipă, capătă sens și merită lăsate în urmă, în scris.
      </p>
    </div>

      <div class="grid md:grid-cols-3 gap-8">
        {page.data.map((post) => (
          <BlogCard
  title={post.data.title}
  slug={post.slug}
  description={post.data.description || post.data.meta_description}
  cover_image={post.data.cover_image}
  author={post.data.author}
  date={new Date(post.data.date)} 
/>
        ))}
      </div>

      <Pagination
        currentPage={page.currentPage}
        totalPages={page.lastPage}
        baseUrl="/blog"
      />
    </div>
  </section>
</Layout>